"use strict";(()=>{e=class{static get(e,t){try{let n=localStorage.getItem(e);return n?JSON.parse(n):t??null}catch(n){return console.error(`Error reading from localStorage: ${e}`,n),t??null}}static set(e,t){try{return localStorage.setItem(e,JSON.stringify(t)),!0}catch(t){return console.error(`Error writing to localStorage: ${e}`,t),!1}}static remove(e){try{localStorage.removeItem(e)}catch(t){console.error(`Error removing from localStorage: ${e}`,t)}}static clear(){try{localStorage.clear()}catch(e){console.error("Error clearing localStorage",e)}}},r=class{constructor(){this.storageKey="theme-mode",this.isTransitioning=!1,this.mode=this.getInitialMode(),this.init()}getInitialMode(){let t=e.get(this.storageKey);return t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}init(){this.applyMode(!1),this.bindEvents(),this.watchSystemTheme(),this.updateToggleButton()}applyMode(e=!0){let t=document.documentElement;e&&!this.isTransitioning&&(this.isTransitioning=!0,t.classList.add("theme-transitioning"),setTimeout(()=>{t.classList.remove("theme-transitioning"),this.isTransitioning=!1},300)),t.classList.remove("light","dark"),t.classList.add(this.mode),t.setAttribute("data-theme",this.mode),this.updateToggleButton()}updateToggleButton(){document.querySelectorAll("[data-darkmode-toggle]").forEach(e=>{let n=e.querySelector("svg");if(n){let e=n.querySelector("path");e&&(this.mode==="dark"?e.setAttribute("d","M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"):e.setAttribute("d","M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"))}let t=e.querySelector("i");t&&(t.classList.remove("fa-sun","fa-moon","fa-adjust"),!t.classList.contains("fas")&&!t.classList.contains("far")&&!t.classList.contains("fab")&&t.classList.add("fas"),this.mode==="dark"?t.classList.add("fa-moon"):t.classList.add("fa-sun")),this.mode==="dark"?(e.setAttribute("title","ÂàáÊç¢Âà∞‰∫ÆËâ≤Ê®°Âºè"),e.setAttribute("aria-label","ÂàáÊç¢Âà∞‰∫ÆËâ≤Ê®°Âºè")):(e.setAttribute("title","ÂàáÊç¢Âà∞ÊöóËâ≤Ê®°Âºè"),e.setAttribute("aria-label","ÂàáÊç¢Âà∞ÊöóËâ≤Ê®°Âºè"))})}bindEvents(){let e=e=>{e.addEventListener("click",t=>{e.tagName==="A"&&t.preventDefault(),this.toggle()}),e.addEventListener("keydown",e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),this.toggle())})};document.querySelectorAll("[data-darkmode-toggle]").forEach(t=>e(t)),new MutationObserver(t=>{t.forEach(t=>{t.addedNodes.forEach(t=>{t instanceof HTMLElement&&(t.hasAttribute("data-darkmode-toggle")&&e(t),t.querySelectorAll("[data-darkmode-toggle]").forEach(t=>e(t)))})})}).observe(document.body,{childList:!0,subtree:!0})}watchSystemTheme(){window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{e.get(this.storageKey)||(this.mode=t.matches?"dark":"light",this.applyMode(!0))})}toggle(){this.mode=this.mode==="dark"?"light":"dark",this.applyMode(!0),e.set(this.storageKey,this.mode),window.dispatchEvent(new CustomEvent("themechange",{detail:{mode:this.mode}}))}getMode(){return this.mode}setMode(t){this.mode=t,this.applyMode(!0),e.set(this.storageKey,t)}};function q(){let e=new r;typeof window<"u"&&(window.darkMode=e)}s=class{constructor(){this.isOpen=!1,this.scrollPosition=0,this.elements={menuToggle:document.querySelector("[data-menu-toggle]"),menuClose:document.querySelector("[data-menu-close]"),mobileMenu:document.querySelector("[data-mobile-menu]"),menuOverlay:document.querySelector("[data-menu-overlay]"),submenuToggles:document.querySelectorAll("[data-submenu-toggle]")}}init(){if(!this.elements.menuToggle||!this.elements.mobileMenu||!this.elements.menuOverlay){console.warn("Menu elements not found");return}this.bindEvents(),this.initSubmenus()}bindEvents(){this.elements.menuToggle?.addEventListener("click",()=>this.open()),this.elements.menuClose?.addEventListener("click",()=>this.close()),this.elements.menuOverlay?.addEventListener("click",()=>this.close()),document.querySelectorAll(".mobile-menu-item:not(.mobile-menu-parent)").forEach(e=>{e.addEventListener("click",()=>this.close())}),document.addEventListener("keydown",e=>{e.key==="Escape"&&this.isOpen&&this.close()})}initSubmenus(){this.elements.submenuToggles.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),this.toggleSubmenu(e)})})}toggleSubmenu(e){let n=e.closest(".mobile-menu-group");if(!n)return;let t=n.querySelector("[data-submenu]"),s=e.querySelector("[data-submenu-icon]");if(!t)return;t.style.maxHeight&&t.style.maxHeight!=="0px"?(t.style.maxHeight="0px",s?.classList.remove("rotate-180"),e.setAttribute("aria-expanded","false")):(t.style.maxHeight=t.scrollHeight+"px",s?.classList.add("rotate-180"),e.setAttribute("aria-expanded","true"))}open(){this.isOpen||(this.scrollPosition=window.pageYOffset,this.disableBodyScroll(),this.elements.mobileMenu?.classList.remove("translate-x-full"),this.elements.menuOverlay?.classList.remove("opacity-0","pointer-events-none"),this.isOpen=!0,this.elements.menuToggle?.setAttribute("aria-expanded","true"),document.dispatchEvent(new CustomEvent("menu:opened")))}close(){this.isOpen&&(this.elements.mobileMenu?.classList.add("translate-x-full"),this.elements.menuOverlay?.classList.add("opacity-0","pointer-events-none"),this.enableBodyScroll(),this.isOpen=!1,this.elements.menuToggle?.setAttribute("aria-expanded","false"),document.dispatchEvent(new CustomEvent("menu:closed")))}disableBodyScroll(){document.body.style.position="fixed",document.body.style.top=`-${this.scrollPosition}px`,document.body.style.width="100%",document.body.style.overflow="hidden"}enableBodyScroll(){document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,this.scrollPosition)}isMenuOpen(){return this.isOpen}};function B(){let e=document.querySelector("[data-nav]");e&&setTimeout(()=>{e.classList.remove("opacity-0"),e.classList.add("opacity-100")},100)}function z(){let e=document.getElementById("nav"),s=document.querySelector(".menus_items"),o=document.getElementById("toggle-menu");if(!e||!s||!o)return;let t=()=>{window.innerWidth<1024?e.classList.add("hide-menu"):e.classList.remove("hide-menu")};t();let n;window.addEventListener("resize",()=>{clearTimeout(n),n=window.setTimeout(t,150)})}function C(){B(),z();let e=new s;e.init(),typeof window<"u"&&(window.mobileMenu=e)}function x(e,t=document){return t.querySelector(e)}function c(e,t,n){e.classList.toggle(t,n)}function w(e,t){let n;return function(...s){let o=this;n||(e.apply(o,s),n=!0,setTimeout(()=>n=!1,t))}}d=class{constructor(){this.button=null,this.percentElement=null,this.showThreshold=300,this.showPercentThreshold=0,this.init()}init(){this.button=x("[data-back-to-top]"),this.percentElement=this.button?.querySelector(".scroll-percent")||null,this.button&&(this.bindEvents(),this.updateVisibility())}bindEvents(){this.button?.addEventListener("click",()=>this.scrollToTop()),window.addEventListener("scroll",w(()=>{this.updateVisibility(),this.updateScrollPercent()},100))}updateVisibility(){if(!this.button)return;let e=window.scrollY>this.showThreshold;c(this.button,"show",e)}getScrollPercent(){let t=document.documentElement.scrollHeight,n=window.innerHeight,s=window.scrollY,e=t-n;if(e<=0)return 0;let o=s/e*100;return Math.max(0,Math.min(100,Math.round(o)))}updateScrollPercent(){if(!this.button||!this.percentElement)return;let e=this.getScrollPercent();this.percentElement.textContent=`${e}%`;let t=e>this.showPercentThreshold;c(this.button,"show-percent",t)}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}};function y(){let e=new d;typeof window<"u"&&(window.backToTop=e)}var e,n,s,o,r,l,d,j=class{constructor(){this.elements=null,this.activeHeadingId="",this.observer=null}init(){let e=document.querySelector("[data-toc]");if(!e)return;let n=e.querySelector("[data-toc-content]"),s=e.querySelector("[data-toc-percentage]"),t=e.querySelectorAll(".toc-content a");if(!n||!s||t.length===0)return;let o=this.getHeadings(t);o.length!==0&&(this.elements={tocCard:e,tocContent:n,tocPercentage:s,tocLinks:t,headings:o},this.setupClickHandlers(),this.setupScrollObserver(),this.setupScrollProgress(),this.setupMobileToggle())}getHeadings(e){let t=[];return e.forEach(e=>{let n=e.getAttribute("href");if(n&&n.startsWith("#")){let s=n.substring(1),e=document.getElementById(s);e&&t.push(e)}}),t}setupClickHandlers(){this.elements&&this.elements.tocLinks.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();let n=e.getAttribute("href");if(n&&n.startsWith("#")){let t=n.substring(1),e=document.getElementById(t);e&&this.scrollToHeading(e)}})})}scrollToHeading(e){let t=e.getBoundingClientRect().top+window.pageYOffset-80;window.scrollTo({top:t,behavior:"smooth"})}setupScrollObserver(){if(!this.elements)return;let e={rootMargin:"-80px 0px -80% 0px",threshold:0};this.observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&this.setActiveHeading(e.target.id)})},e),this.elements.headings.forEach(e=>{this.observer?.observe(e)})}setActiveHeading(e){if(!this.elements||e===this.activeHeadingId)return;this.activeHeadingId=e,this.elements.tocLinks.forEach(e=>{e.classList.remove("active")});let t=Array.from(this.elements.tocLinks).find(t=>t.getAttribute("href")===`#${e}`);t&&(t.classList.add("active"),this.scrollTocToActiveLink(t))}scrollTocToActiveLink(e){if(this.elements)try{let t=this.elements.tocContent,n=e.getBoundingClientRect(),s=t.getBoundingClientRect();if(n.top<s.top||n.bottom>s.bottom){let n=e.offsetTop-t.offsetTop-t.clientHeight/2;t.scrollTo({top:n,behavior:"smooth"})}}catch{}}setupScrollProgress(){if(!this.elements)return;let t=()=>{let t=window.innerHeight,n=document.documentElement.scrollHeight,s=window.pageYOffset||document.documentElement.scrollTop,e=n-t,o=e>0?s/e*100:0;this.elements?.tocPercentage&&(this.elements.tocPercentage.textContent=`${Math.round(o)}%`)};t();let e=!1;window.addEventListener("scroll",()=>{e||(window.requestAnimationFrame(()=>{t(),e=!1}),e=!0)})}setupMobileToggle(){if(!this.elements)return;let e=window.innerWidth<1024;e&&this.createMobileToggleButton(),window.addEventListener("resize",()=>{window.innerWidth<1024!==e&&location.reload()})}createMobileToggleButton(){if(!this.elements)return;let e=this.elements.tocCard;e.classList.add("mobile-toc"),document.addEventListener("click",t=>{let n=t.target;!e.contains(n)&&e.classList.contains("open")&&e.classList.remove("open")})}toggleMobileToc(){this.elements&&this.elements.tocCard.classList.toggle("open")}destroy(){this.observer&&(this.observer.disconnect(),this.observer=null),this.elements=null,this.activeHeadingId=""}},g=new j;function M(){g.init()}function p(){let e=document.getElementById("aside-cat-list");e&&e.addEventListener("click",e=>{let n=e.target.closest(".card-category-list-link");if(!n||!n.querySelector("i.fa-caret-left"))return;e.preventDefault(),n.classList.toggle("expand");let t=n.parentElement?.querySelector(".card-category-list.child");t&&(n.classList.contains("expand")?(t.style.maxHeight=`${t.scrollHeight}px`,t.style.opacity="1",t.style.visibility="visible"):(t.style.maxHeight="0",t.style.opacity="0",t.style.visibility="hidden"))})}function t(){return document.documentElement.lang||"zh"}function v(e,n){let s=n.getTime()-e.getTime(),o=Math.floor(s/(1e3*60*60*24)),i=Math.floor(s%(1e3*60*60*24)/(1e3*60*60)),a=Math.floor(s%(1e3*60*60)/(1e3*60)),r=Math.floor(s%(1e3*60)/1e3),c=t();return c==="en"?`${o} days ${i} hours ${a} minutes ${r} seconds`:c==="zh-tw"?`${o} Â§© ${i} Â∞èÊôÇ ${a} ÂàÜÈêò ${r} Áßí`:`${o} Â§© ${i} Â∞èÊó∂ ${a} ÂàÜÈíü ${r} Áßí`}function b(e){let c=(new Date).getTime()-e.getTime(),l=Math.floor(c/1e3),s=Math.floor(l/60),o=Math.floor(s/60),n=Math.floor(o/24),i=Math.floor(n/30),a=Math.floor(n/365),r=t();return r==="en"?a>0?`${a} year${a>1?"s":""} ago`:i>0?`${i} month${i>1?"s":""} ago`:n>0?`${n} day${n>1?"s":""} ago`:o>0?`${o} hour${o>1?"s":""} ago`:s>0?`${s} minute${s>1?"s":""} ago`:"Just now":r==="zh-tw"?a>0?`${a} Âπ¥Ââç`:i>0?`${i} ÂÄãÊúàÂâç`:n>0?`${n} Â§©Ââç`:o>0?`${o} Â∞èÊôÇÂâç`:s>0?`${s} ÂàÜÈêòÂâç`:"ÂâõÂâõ":a>0?`${a} Âπ¥Ââç`:i>0?`${i} ‰∏™ÊúàÂâç`:n>0?`${n} Â§©Ââç`:o>0?`${o} Â∞èÊó∂Ââç`:s>0?`${s} ÂàÜÈíüÂâç`:"ÂàöÂàö"}function h(){let e=document.getElementById("runtimeshow");if(!e)return;let n=e.getAttribute("data-publish-date");if(n)try{let s=new Date(n),o=new Date;if(isNaN(s.getTime())){console.error("Invalid publish date:",n);let s=t();e.textContent=s==="en"?"Invalid date format":s==="zh-tw"?"Êó•ÊúüÊ†ºÂºèÈåØË™§":"Êó•ÊúüÊ†ºÂºèÈîôËØØ";return}e.textContent=v(s,o)}catch(s){console.error("Error updating runtime:",s);let n=t();e.textContent=n==="en"?"Calculation error":n==="zh-tw"?"Ë®àÁÆóÈåØË™§":"ËÆ°ÁÆóÈîôËØØ"}}function u(){let e=document.getElementById("last-push-date");if(!e)return;let n=e.getAttribute("data-last-push-date");if(n)try{let s=new Date(n);if(isNaN(s.getTime())){console.error("Invalid last push date:",n);let s=t();e.textContent=s==="en"?"Invalid date format":s==="zh-tw"?"Êó•ÊúüÊ†ºÂºèÈåØË™§":"Êó•ÊúüÊ†ºÂºèÈîôËØØ";return}e.textContent=b(s)}catch(s){console.error("Error updating last push date:",s);let n=t();e.textContent=n==="en"?"Calculation error":n==="zh-tw"?"Ë®àÁÆóÈåØË™§":"ËÆ°ÁÆóÈîôËØØ"}}function _(){h(),u(),document.getElementById("runtimeshow")&&setInterval(h,1e3),document.getElementById("last-push-date")&&setInterval(u,6e4)}l=class{constructor(e){this.path=e.path,this.unescape=e.unescape||!1,this.topNPerArticle=e.topNPerArticle||1,this.isfetched=!1,this.datas=null}getIndexByWord(e,t,n=!1){let s=[],o=new Set;return n||(t=t.toLowerCase()),e.forEach(e=>{if(this.unescape){let t=document.createElement("div");t.innerText=e,e=t.innerHTML}let a=e.length;if(a===0)return;let r=0,i=-1;for(n||(e=e.toLowerCase());(i=t.indexOf(e,r))>-1;)s.push({position:i,word:e}),o.add(e),r=i+a}),s.sort((e,t)=>e.position!==t.position?e.position-t.position:t.word.length-e.word.length),[s,o]}mergeIntoSlice(e,t,n){let i=[],r=new Set;if(n.length===0)return{hits:i,start:e,end:t,count:0};let a=n[0];if(!a)return{hits:i,start:e,end:t,count:0};let s=a.position,o=a.word;for(;s+o.length<=t&&n.length!==0;){r.add(o),i.push({position:s,length:o.length});let e=s+o.length;for(n.shift();n.length!==0;){let t=n[0];if(!t)break;if(s=t.position,o=t.word,e>s)n.shift();else break}}return{hits:i,start:e,end:t,count:r.size}}highlightKeyword(e,t){let n="",s=t.start;for(let{position:o,length:i}of t.hits)n+=e.substring(s,o),s=o+i,n+=`<mark class="search-keyword">${e.substr(o,i)}</mark>`;return n+=e.substring(s,t.end),n}getResultItems(e){let t=[];return this.datas&&this.datas.forEach(({title:n,content:s,url:o})=>{let[l,f]=this.getIndexByWord(e,n),[r,p]=this.getIndexByWord(e,s),g=new Set([...f,...p]).size,h=l.length+r.length;if(h===0)return;let c=[];l.length!==0&&c.push(this.mergeIntoSlice(0,n.length,l));let i=[];for(;r.length!==0;){let e=r[0];if(!e)break;let{position:t}=e,n=Math.max(0,t-20),o=Math.min(s.length,t+100);i.push(this.mergeIntoSlice(n,o,r))}i.sort((e,t)=>e.count!==t.count?t.count-e.count:e.hits.length!==t.hits.length?t.hits.length-e.hits.length:e.start-t.start);let m=parseInt(String(this.topNPerArticle),10);m>=0&&(i=i.slice(0,m));let a="",d;try{d=new URL(o).href}catch{d=new URL(o,location.origin).href}let u=new URL(d);u.searchParams.append("highlight",e.join(" ")),c.length!==0&&c[0]?a+=`<li class="local-search-hit-item"><a href="${u.href}"><span class="search-result-title">${this.highlightKeyword(n,c[0])}</span>`:a+=`<li class="local-search-hit-item"><a href="${u.href}"><span class="search-result-title">${n}</span>`,i.forEach(e=>{a+=`<p class="search-result">${this.highlightKeyword(s,e)}...</p>`}),a+="</a></li>",t.push({item:a,id:t.length,hitCount:h,includedCount:g})}),t}async fetchData(){try{let e=await fetch(this.path);if(!e.ok)throw new Error("Failed to load search index");let t=await e.json();this.isfetched=!0,this.datas=t.pages||[],this.datas&&(this.datas=this.datas.filter(e=>e.title).map(e=>(e.title=e.title.trim(),e.content=e.content?e.content.trim().replace(/<[^>]+>/g,""):"",e.url=decodeURIComponent(e.url).replace(/\/{2,}/g,"/"),e))),window.dispatchEvent(new Event("search:loaded"))}catch(e){console.error("Search index load error:",e),window.dispatchEvent(new Event("search:error"))}}highlightSearchWords(e){if(!e)return;let n=new URL(location.href).searchParams.get("highlight"),s=n?n.split(" "):[];if(!s.length)return;let t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null),o=[];for(;t.nextNode();){let e=t.currentNode.parentNode;e&&!e.matches("button, select, textarea, .mermaid, code, pre")&&o.push(t.currentNode)}o.forEach(e=>{let[t]=this.getIndexByWord(s,e.nodeValue||"");if(!t.length)return;let n=this.mergeIntoSlice(0,(e.nodeValue||"").length,t);this.highlightText(e,n,"search-keyword")})}highlightText(e,t,n){let s=e.nodeValue||"",o=t.start,i=[];for(let{position:e,length:r}of t.hits){let c=document.createTextNode(s.substring(o,e));o=e+r;let a=document.createElement("mark");a.className=n,a.appendChild(document.createTextNode(s.substr(e,r))),i.push(c,a)}e.nodeValue=s.substring(o,t.end),i.forEach(t=>{e.parentNode?.insertBefore(t,e)})}};function O(){let t=window.searchConfig;if(!t||!t.enable)return;let i=new l({path:t.path||"/index.json",unescape:t.unescape||!1,topNPerArticle:t.topNPerArticle||1,pagination:t.pagination,languages:t.languages||{hits_stats:"ÊâæÂà∞ ${hits} Êù°ÁªìÊûú",hits_empty:'Êú™ÊâæÂà∞ "${query}" ÁöÑÊêúÁ¥¢ÁªìÊûú'}}),c=document.querySelector("#local-search"),a=document.getElementById("search-mask"),m=document.querySelector("#local-search .search-dialog"),r=document.querySelector(".local-search-input input"),u=document.getElementById("local-search-stats"),g=document.getElementById("loading-status"),d=document.getElementById("local-search-results"),e=document.getElementById("local-search-pagination");if(!c||!a||!m||!r||!u||!g||!d)return;let n=t.pagination?.enable||!1,h=t.pagination?.hitsPerPage||10,o=0,s=[],j=()=>{document.body.style.overflow="hidden",c.classList.add("show"),a.classList.add("show"),setTimeout(()=>{r.focus()},300),i.isfetched||i.fetchData(),window.innerWidth<768&&m.style.setProperty("--search-height",`${window.innerHeight}px`)},p=()=>{document.body.style.overflow="",m.classList.add("closing"),a.classList.add("closing"),setTimeout(()=>{c.classList.remove("show"),a.classList.remove("show"),m.classList.remove("closing"),a.classList.remove("closing")},500)},y=(t,s)=>{if(!e||!n)return;let c=e.querySelector(".ais-Pagination-list");if(!c)return;if(s<=1){e.style.display="none",c.innerHTML="";return}e.style.display="block";let l=t===0,d=t===s-1,i=window.innerWidth<768?3:5,a=Math.max(0,t-Math.floor(i/2)),r=Math.min(s-1,a+i-1);r-a+1<i&&(a=Math.max(0,r-i+1));let o="";s>i&&a>0&&(o+=`
        <li class="ais-Pagination-item ais-Pagination-item--page">
          <a class="ais-Pagination-link" aria-label="Page 1" href="#" data-page="0">1</a>
        </li>`,a>1&&(o+=`
          <li class="ais-Pagination-item ais-Pagination-item--ellipsis">
            <span class="ais-Pagination-link">...</span>
          </li>`));for(let e=a;e<=r;e++)e===t?o+=`
          <li class="ais-Pagination-item ais-Pagination-item--page ais-Pagination-item--selected">
            <span class="ais-Pagination-link" aria-label="Page ${e+1}">${e+1}</span>
          </li>`:o+=`
          <li class="ais-Pagination-item ais-Pagination-item--page">
            <a class="ais-Pagination-link" aria-label="Page ${e+1}" href="#" data-page="${e}">${e+1}</a>
          </li>`;s>i&&r<s-1&&(r<s-2&&(o+=`
          <li class="ais-Pagination-item ais-Pagination-item--ellipsis">
            <span class="ais-Pagination-link">...</span>
          </li>`),o+=`
        <li class="ais-Pagination-item ais-Pagination-item--page">
          <a class="ais-Pagination-link" aria-label="Page ${s}" href="#" data-page="${s-1}">${s}</a>
        </li>`),c.innerHTML=`
      <li class="ais-Pagination-item ais-Pagination-item--previousPage ${l?"ais-Pagination-item--disabled":""}">
        ${l?'<span class="ais-Pagination-link" aria-label="Previous Page"><i class="fas fa-angle-left"></i></span>':`<a class="ais-Pagination-link" aria-label="Previous Page" href="#" data-page="${t-1}"><i class="fas fa-angle-left"></i></a>`}
      </li>
      ${o}
      <li class="ais-Pagination-item ais-Pagination-item--nextPage ${d?"ais-Pagination-item--disabled":""}">
        ${d?'<span class="ais-Pagination-link" aria-label="Next Page"><i class="fas fa-angle-right"></i></span>':`<a class="ais-Pagination-link" aria-label="Next Page" href="#" data-page="${t+1}"><i class="fas fa-angle-right"></i></a>`}
      </li>`},f=i=>{let a=n?s.slice(o*h,(o+1)*h):i;if(n&&a.length===0&&s.length>0){o=0,f(i);return}let r=a.map((e,t)=>{let s=n?o*h+t+1:t+1;return e.item.replace('<li class="local-search-hit-item">',`<li class="local-search-hit-item" value="${s}">`)});d.innerHTML=`<ol class="search-result-list">${r.join("")}</ol>`;let c=n?s.length:i.length,l=t.languages.hits_stats.replace(/\$\{hits}/,String(c));if(u.innerHTML=`<hr><div class="search-result-stats">${l}</div>`,n&&e){let t=Math.ceil(s.length/h);y(o,t),e.style.display=i.length>0?"":"none"}},_=()=>{d.textContent="",u.textContent="",e&&(e.style.display="none"),n&&(s=[],o=0)},w=i=>{d.textContent="";let a=document.createElement("div");a.className="search-result-stats",a.textContent=t.languages.hits_empty.replace(/\$\{query}/,i),u.innerHTML=a.outerHTML,e&&(e.style.display="none"),n&&(s=[],o=0)},O=()=>{if(!i.isfetched)return;let t=r.value.trim().toLowerCase();t!==""&&(g.hidden=!1);let a=t.split(/[-\s]+/),e=[];t.length>0&&(e=i.getResultItems(a)),a.length===1&&a[0]===""?_():e.length===0?w(t):(e.sort((e,t)=>e.includedCount!==t.includedCount?t.includedCount-e.includedCount:e.hitCount!==t.hitCount?t.hitCount-e.hitCount:t.id-e.id),n&&(s=e,o=0),f(e)),g.hidden=!0},v=document.querySelector("#search-button .search");v&&v.addEventListener("click",j);let b=document.querySelector("#local-search .search-close-button");b&&b.addEventListener("click",p),a.addEventListener("click",p),document.addEventListener("keydown",e=>{e.key==="Escape"&&c.classList.contains("show")&&p()}),r.addEventListener("input",O),e&&n&&e.addEventListener("click",e=>{e.preventDefault();let t=e.target.closest("a[data-page]");if(t){let e=parseInt(t.dataset.page||"0",10);!isNaN(e)&&s.length>0&&(o=e,f(s))}}),window.addEventListener("search:loaded",()=>{let e=document.getElementById("loading-database");if(e){let t=e.nextElementSibling;t&&(t.style.visibility="visible"),e.remove()}}),i.highlightSearchWords(document.getElementById("article-container")),t.preload&&i.fetchData()}function m(){let c=document.querySelector("#search-button .search"),o=document.querySelector("#local-search"),i=document.getElementById("search-mask"),h=document.querySelector(".search-close-button"),e=document.getElementById("pagefind-search-input"),n=document.getElementById("local-search-results"),s=document.getElementById("local-search-stats"),t=document.getElementById("loading-status");if(!c||!o||!i||!e||!n||!s){console.error("Search elements not found in the DOM");return}let l=!1,f=()=>{document.body.style.overflow="hidden",o.classList.add("show"),i.classList.add("show"),setTimeout(()=>{e.focus()},300)},a=()=>{document.body.style.overflow="",o.classList.remove("show"),i.classList.remove("show")},u=(e,t)=>{if(!e)return"";if(!t)return e;let n=new RegExp(`(${t})`,"gi");return e.replace(n,'<mark class="search-keyword">$1</mark>')},r=async t=>{if(!t||t.length===0){n.innerHTML="",s.innerHTML=`
        <div class="search-result-stats">
          ${e.value.trim()?`Êú™ÊâæÂà∞ "${e.value}" ÁöÑÊêúÁ¥¢ÁªìÊûú`:"ËØ∑ËæìÂÖ•ÊêúÁ¥¢ËØç"}
        </div>
      `;return}let o=[],i=e.value.trim();for(let e=0;e<t.length;e++){let n=t[e];if(n)try{let t=await n.data(),s=u(t.meta.title,i),a=u(t.excerpt,i);o.push(`
          <li class="local-search-hit-item" value="${e+1}">
            <a href="${t.url}">
              <span class="search-result-title">${s}</span>
              <p class="search-result">${a}...</p>
            </a>
          </li>
        `)}catch(e){console.error("Error processing search result:",e);continue}}n.innerHTML=`
      <ol class="search-result-list">
        ${o.join("")}
      </ol>
    `,s.innerHTML=`
      <hr>
      <div class="search-result-stats">
        ÊâæÂà∞ ${t.length} Êù°ÁªìÊûú
      </div>
    `},m=async e=>{if(!e.trim()){n.innerHTML="",s.innerHTML="";return}if(!window.pagefind){console.error("Pagefind not loaded");return}try{t&&(t.hidden=!1);let n=await window.pagefind.debouncedSearch(e,{debounce:300});if(t&&(t.hidden=!0),!n){console.warn("Search returned null or undefined"),await r(null);return}await r(n.results)}catch(e){console.error("Search error:",e),t&&(t.hidden=!0),n.innerHTML="",s.innerHTML=`
        <div class="search-result-stats">
          ÊêúÁ¥¢Âá∫ÈîôÔºåËØ∑Á®çÂêéÈáçËØï
        </div>
      `}};c.addEventListener("click",f),h?.addEventListener("click",a),i.addEventListener("click",a),document.addEventListener("keydown",e=>{e.key==="Escape"&&o.classList.contains("show")&&a()}),e.addEventListener("input",()=>{m(e.value)});let d=setInterval(()=>{window.pagefind&&!l&&(l=!0,clearInterval(d),console.log("‚ú® Pagefind loaded successfully"))},100);setTimeout(()=>{clearInterval(d)},1e4)}n={showCopyButton:!0,showExpandButton:!0,heightLimit:400,macStyle:!0,copySuccessText:"Â∑≤Â§çÂà∂",copyText:"Â§çÂà∂",expandText:"Â±ïÂºÄ",collapseText:"Êî∂Ëµ∑"};async function E(e){try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(e),!0;let t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select();let n=document.execCommand("copy");return document.body.removeChild(t),n}catch(e){return console.error("Failed to copy text:",e),!1}}function k(e,t){let o=e.innerHTML,n=e.querySelector("i"),s=e.querySelector("span");e.classList.add("copied"),n&&(n.className="fas fa-check"),s&&(s.textContent=t.copySuccessText||"Â∑≤Â§çÂà∂"),setTimeout(()=>{e.classList.remove("copied"),e.innerHTML=o},2e3)}function A(e,t){let n=e.closest(".highlight-wrapper");if(!n)return;let s=n.querySelector(".highlight code");if(!s)return;let o=s.textContent||"";E(o).then(n=>{n?k(e,t):console.error("Failed to copy code")})}function S(e){let t=e.closest(".highlight-wrapper");if(!t)return;t.classList.toggle("collapsed"),e.querySelector("i")&&e.classList.toggle("collapsed")}function f(e){let t=e.closest(".highlight-wrapper");if(!t)return;t.classList.toggle("expanded");let s=t.classList.contains("expanded"),n=e.querySelector("i");n&&(n.style.transform=s?"rotate(180deg)":"")}function F(e,t){let n=document.createElement("div");if(n.className="highlight-tools",t.macStyle){let e=document.createElement("div");e.className="mac-buttons",e.innerHTML=`
      <span class="mac-close"></span>
      <span class="mac-minimize"></span>
      <span class="mac-maximize"></span>
    `,n.appendChild(e)}let s=document.createElement("div");if(s.className="code-lang",s.textContent=e||"CODE",n.appendChild(s),t.showExpandButton){let e=document.createElement("button");e.className="expand-button",e.innerHTML='<i class="fas fa-chevron-down"></i>',e.setAttribute("aria-label","Â±ïÂºÄ/ÊäòÂè†‰ª£Á†Å"),e.addEventListener("click",()=>S(e)),n.appendChild(e)}if(t.showCopyButton){let e=document.createElement("button");e.className="copy-button",e.innerHTML=`
      <i class="fas fa-copy"></i>
      <span>${t.copyText||"Â§çÂà∂"}</span>
    `,e.setAttribute("aria-label","Â§çÂà∂‰ª£Á†Å"),e.addEventListener("click",()=>A(e,t)),n.appendChild(e)}return n}function T(e){let t=document.createElement("button");return t.className="code-expand-btn",t.innerHTML='<i class="fas fa-angle-down"></i>',t.setAttribute("aria-label",e.expandText||"Â±ïÂºÄ‰ª£Á†Å"),t.addEventListener("click",()=>f(t)),t}function i(e,t){if(e.parentElement?.classList.contains("highlight-wrapper"))return;let s=Array.from(e.classList).find(e=>e.startsWith("language-")),o=s?s.replace("language-",""):"",n=document.createElement("div");n.className="highlight-wrapper",t.macStyle&&n.classList.add("mac-style"),e.parentNode?.insertBefore(n,e),n.appendChild(e);let i=F(o,t);if(n.insertBefore(i,e),t.heightLimit&&t.heightLimit>0){let s=e.querySelector("pre");if(s&&s.scrollHeight>t.heightLimit){n.classList.add("has-height-limit");let e=T(t);n.appendChild(e)}}}function D(e){let t={...n,...e};document.querySelectorAll(".highlight").forEach(e=>{i(e,t)}),typeof MutationObserver<"u"&&new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{e instanceof Element&&e.querySelectorAll(".highlight").forEach(e=>{i(e,t)})})})}).observe(document.body,{childList:!0,subtree:!0})}function N(){let e={},t=document.documentElement,n=t.dataset.highlightCopy,s=t.dataset.highlightExpand,o=t.dataset.highlightHeightLimit,i=t.dataset.highlightMacStyle;return n!==0[0]&&(e.showCopyButton=n==="true"),s!==0[0]&&(e.showExpandButton=s==="true"),o!==0[0]&&(e.heightLimit=parseInt(o,10)),i!==0[0]&&(e.macStyle=i==="true"),e}function L(e,t,n){let s=document.createElement(t);Object.entries(n).forEach(([e,t])=>{s.setAttribute(e,t)}),e.parentNode?.insertBefore(s,e),s.appendChild(e)}function R(e){if(typeof window.mediumZoom!="function"){console.warn("medium-zoom library not loaded");return}let t=window.mediumZoom;t(e,{margin:24,background:"var(--zoom-bg, rgba(0, 0, 0, 0.9))",scrollOffset:0}),console.log(`‚úÖ Medium Zoom initialized for ${e.length} images`)}function P(e){if(typeof window.Fancybox>"u"){console.warn("Fancybox library not loaded");return}let t=window.Fancybox;if(e.forEach(e=>{if(e.parentElement?.tagName==="A")return;let t=e.dataset.lazySrc||e.src,n=e.title||e.alt||"";L(e,"a",{href:t,"data-fancybox":"gallery","data-caption":n,"data-thumb":t})}),window.fancyboxRun)return;let n={Hash:!1,Carousel:{transition:"slide"},Toolbar:{display:{left:["infobar"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY"],right:["slideshow","thumbs","close"]}},Images:{Panzoom:{maxScale:4}},Thumbs:{showOnStart:!1}};t.bind("[data-fancybox]",n),window.fancyboxRun=!0,console.log(`‚úÖ Fancybox initialized for ${e.length} images`)}function H(){let e=document.querySelector('meta[name="lightbox-config"]');if(e)try{let t=e.getAttribute("content");if(t)return JSON.parse(t)}catch(e){console.error("Failed to parse lightbox config:",e)}return{type:"medium_zoom",selector:"#article-container img",excludeClass:"no-lightbox"}}function I(e){let t={...H(),...e};if(!t.type){console.log("Lightbox is disabled");return}let s=`${t.selector}:not(.${t.excludeClass})`,n=document.querySelectorAll(s);if(n.length===0){console.log("No images found for lightbox");return}switch(t.type){case"medium_zoom":R(n);break;case"fancybox":P(n);break;default:console.warn(`Unknown lightbox type: ${t.type}`)}}o=class{constructor(){this.storageKey="butterfly-theme-color",this.currentTheme="sapphire",this.themeSelectBtn=null,this.themePanel=null,this.isTransitioning=!1,this.themes={sapphire:{id:"sapphire",name:"ÂÆùÁü≥Ëìù",description:"‰∏ì‰∏ö„ÄÅÂèØ‰ø°„ÄÅÁßëÊäÄÊÑü",category:"cool",className:"theme-sapphire"},purple:{id:"purple",name:"ÁöáÂÆ∂Á¥´",description:"‰ºòÈõÖ„ÄÅÂàõÊÑè„ÄÅÈ´òÁ´Ø",category:"cool",className:"theme-purple"},ocean:{id:"ocean",name:"Êµ∑Ê¥ãÈ£é",description:"Ê∏ÖÊñ∞„ÄÅ‰∏ì‰∏ö„ÄÅÂπ≥Èùô",category:"cool",className:"theme-ocean"},"cool-gray":{id:"cool-gray",name:"ÂÜ∑ÁÅ∞Ëìù",description:"ÊûÅÁÆÄ„ÄÅ‰∏ì‰∏ö„ÄÅÊ≤âÈùô",category:"cool",className:"theme-cool-gray"},lavender:{id:"lavender",name:"Ëñ∞Ë°£Ëçâ",description:"‰ºòÈõÖ„ÄÅËâ∫ÊúØ„ÄÅÊ∏©Êüî",category:"warm",className:"theme-lavender"},orange:{id:"orange",name:"Ê∏©ÊöñÊ©ô",description:"ÂèãÂ•Ω„ÄÅÊ∏©Êöñ„ÄÅ‰∫≤Ëøë",category:"warm",className:"theme-orange"},pink:{id:"pink",name:"Ê®±Ëä±Á≤â",description:"Ê∏©Êüî„ÄÅ‰ºòÁæé„ÄÅÂ•≥ÊÄßÂåñ",category:"warm",className:"theme-pink"},brown:{id:"brown",name:"ÁßãÂúüË§ê",description:"Á®≥Èáç„ÄÅËá™ÁÑ∂„ÄÅÊÄÄÊóß",category:"warm",className:"theme-brown"}},this.currentTheme=this.getInitialTheme(),this.init()}getInitialTheme(){let t=e.get(this.storageKey);return t&&this.themes[t]?t:"sapphire"}init(){this.applyTheme(this.currentTheme,!1),this.bindEvents()}applyTheme(e,t=!0){let n=document.documentElement,s=this.themes[e];if(!s){console.warn(`Theme "${e}" not found`);return}t&&!this.isTransitioning&&(this.isTransitioning=!0,n.classList.add("theme-transitioning"),setTimeout(()=>{n.classList.remove("theme-transitioning"),this.isTransitioning=!1},300)),Object.values(this.themes).forEach(e=>{n.classList.remove(e.className)}),n.classList.add(s.className),n.setAttribute("data-theme-color",e),this.currentTheme=e,this.updatePanelState(),window.dispatchEvent(new CustomEvent("themechange",{detail:{color:e,theme:s}}))}updatePanelState(){if(!this.themePanel)return;this.themePanel.querySelectorAll("[data-theme-item]").forEach(e=>{e.getAttribute("data-theme-item")===this.currentTheme?(e.classList.add("active"),e.setAttribute("aria-pressed","true")):(e.classList.remove("active"),e.setAttribute("aria-pressed","false"))})}bindEvents(){this.themeSelectBtn=document.querySelector("[data-theme-switcher-btn]"),this.themePanel=document.querySelector("[data-theme-panel]"),this.themeSelectBtn&&(this.themeSelectBtn.addEventListener("click",e=>{e.stopPropagation(),this.togglePanel()}),this.themeSelectBtn.addEventListener("keydown",e=>{let t=e;(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),this.togglePanel())})),this.themePanel&&(this.themePanel.querySelectorAll("[data-theme-item]").forEach(e=>{e.addEventListener("click",()=>{let t=e.getAttribute("data-theme-item");this.setTheme(t),this.closePanel()}),e.addEventListener("keydown",t=>{let n=t;if(n.key==="Enter"||n.key===" "){n.preventDefault();let t=e.getAttribute("data-theme-item");this.setTheme(t),this.closePanel()}})}),document.addEventListener("click",e=>{!this.themePanel?.contains(e.target)&&!this.themeSelectBtn?.contains(e.target)&&this.closePanel()}))}togglePanel(){if(!this.themePanel)return;this.themePanel.classList.contains("active")?this.closePanel():this.openPanel()}openPanel(){this.themePanel&&(this.themePanel.classList.add("active"),this.updatePanelState())}closePanel(){this.themePanel&&this.themePanel.classList.remove("active")}getCurrentTheme(){return this.currentTheme}setTheme(t){if(!this.themes[t]){console.warn(`Theme "${t}" not found`);return}this.applyTheme(t,!0),e.set(this.storageKey,t)}getAllThemes(){return this.themes}getThemesByCategory(e){return Object.values(this.themes).filter(t=>t.category===e)}};function V(){let e=new o;typeof window<"u"&&(window.themeSwitcher=e)}function $(){let e="pagination-scroll-position";document.addEventListener("click",t=>{if(t.target.closest(".pagination a")){let t=document.querySelector("#recent-posts, .post-list, main");if(t){let s=t.getBoundingClientRect(),n=window.scrollY+s.top;sessionStorage.setItem(e,n.toString()),console.log("üíæ ‰øùÂ≠òÊªöÂä®‰ΩçÁΩÆ:",n)}}});let t=()=>{let t=sessionStorage.getItem(e);if(t){console.log("üìç Ê£ÄÊµãÂà∞‰øùÂ≠òÁöÑ‰ΩçÁΩÆ:",t),sessionStorage.removeItem(e);let n=parseInt(t,10);requestAnimationFrame(()=>{window.scrollTo({top:n,behavior:"instant"}),console.log("‚úÖ Â∑≤ÊÅ¢Â§çÂà∞‰ΩçÁΩÆ:",n)})}};t(),window.addEventListener("pageshow",e=>{console.log("üîÑ pageshow ‰∫ã‰ª∂Ëß¶Âèë, persisted:",e.persisted),e.persisted&&t()})}function W(){let s="aside-hidden",e=document.getElementById("hide-aside-btn"),n=document.querySelector("#aside-content, .sidebar-wrapper, #aside, aside");if(!e||!n)return;let t=localStorage.getItem(s)==="true",o=t=>{t?(n.classList.add("hide"),e.classList.add("active"),e.setAttribute("title","ÊòæÁ§∫‰æßËæπÊ†è")):(n.classList.remove("hide"),e.classList.remove("active"),e.setAttribute("title","ÈöêËóè‰æßËæπÊ†è"))};o(t),e.addEventListener("click",()=>{t=!t,o(t),localStorage.setItem(s,t.toString())})}function U(){let e=document.getElementById("rightside-config"),t=document.getElementById("rightside-config-hide"),n=document.getElementById("rightside-config-show");if(!e||!t||!n)return;let s=!1;e.addEventListener("click",()=>{s=!s,s?(t.style.display="flex",n.style.display="flex",e.classList.add("active")):(t.style.display="none",n.style.display="flex",e.classList.remove("active"))})}function K(){$(),W(),U()}function a(){console.log("ü¶ã Initializing Butterfly Theme..."),q(),V(),C(),y(),M(),p(),_(),document.querySelector("#local-search")?m():O();let e=N();D(e),I(),K(),console.log("‚úÖ Butterfly Theme initialized successfully")}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",a):a()})()